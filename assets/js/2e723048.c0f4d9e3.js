"use strict";(self.webpackChunkokai_docs=self.webpackChunkokai_docs||[]).push([[87246],{85232:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"guides/advanced","title":"\ud83d\udd27 Advanced Usage Guide","description":"This guide covers advanced features and capabilities of OKai, including complex integrations, custom services, and specialized plugins.","source":"@site/docs/guides/advanced.md","sourceDirName":"guides","slug":"/guides/advanced","permalink":"/okai/docs/guides/advanced","draft":false,"unlisted":false,"editUrl":"https://github.com/okcashpro/okai/tree/main/docs/docs/guides/advanced.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Configuration","permalink":"/okai/docs/guides/configuration"},"next":{"title":"Secrets Management","permalink":"/okai/docs/guides/secrets-management"}}');var s=r(74848),t=r(28453);const a={sidebar_position:10},o="\ud83d\udd27 Advanced Usage Guide",c={},l=[{value:"Service Integration",id:"service-integration",level:2},{value:"Video Processing Service",id:"video-processing-service",level:3},{value:"Image Processing",id:"image-processing",level:3},{value:"Blockchain Integration",id:"blockchain-integration",level:2},{value:"Solana Integration",id:"solana-integration",level:3},{value:"Token Operations",id:"token-operations",level:4},{value:"Trust Score System",id:"trust-score-system",level:4},{value:"Custom Services",id:"custom-services",level:2},{value:"Speech Generation",id:"speech-generation",level:3},{value:"PDF Processing",id:"pdf-processing",level:3},{value:"Advanced Memory Management",id:"advanced-memory-management",level:2},{value:"Retrievable Memory System",id:"retrievable-memory-system",level:3},{value:"Trust Score Database",id:"trust-score-database",level:3},{value:"Plugin Development",id:"plugin-development",level:2},{value:"Creating Custom Plugins",id:"creating-custom-plugins",level:3},{value:"Advanced Action Development",id:"advanced-action-development",level:3},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Custom Runtime Configuration",id:"custom-runtime-configuration",level:3},{value:"Advanced Model Configuration",id:"advanced-model-configuration",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Caching Strategy",id:"caching-strategy",level:3},{value:"Queue Management",id:"queue-management",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Error Handling",id:"error-handling",level:3},{value:"Resource Management",id:"resource-management",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Debugging",id:"debugging",level:3},{value:"Further Resources",id:"further-resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"-advanced-usage-guide",children:"\ud83d\udd27 Advanced Usage Guide"})}),"\n",(0,s.jsx)(n.p,{children:"This guide covers advanced features and capabilities of OKai, including complex integrations, custom services, and specialized plugins."}),"\n",(0,s.jsx)(n.h2,{id:"service-integration",children:"Service Integration"}),"\n",(0,s.jsx)(n.h3,{id:"video-processing-service",children:"Video Processing Service"}),"\n",(0,s.jsxs)(n.p,{children:["OKai supports advanced video processing capabilities through the ",(0,s.jsx)(n.code,{children:"VideoService"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { VideoService } from "@okcashpro/okai/plugin-node";\r\n\r\n// Initialize service\r\nconst videoService = new VideoService();\r\n\r\n// Process video content\r\nconst result = await videoService.processVideo(url, runtime);\n'})}),"\n",(0,s.jsx)(n.p,{children:"Key features:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Automatic video downloading"}),"\n",(0,s.jsx)(n.li,{children:"Transcription support"}),"\n",(0,s.jsx)(n.li,{children:"Subtitle extraction"}),"\n",(0,s.jsx)(n.li,{children:"Cache management"}),"\n",(0,s.jsx)(n.li,{children:"Queue processing"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"image-processing",children:"Image Processing"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"ImageDescriptionService"})," provides advanced image analysis:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { ImageDescriptionService } from "@okcashpro/okai/plugin-node";\r\n\r\nconst imageService = new ImageDescriptionService();\r\nconst description = await imageService.describeImage(imageUrl, "gpu", runtime);\n'})}),"\n",(0,s.jsx)(n.p,{children:"Features:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Local and cloud processing options"}),"\n",(0,s.jsx)(n.li,{children:"CUDA acceleration support"}),"\n",(0,s.jsx)(n.li,{children:"Automatic format handling"}),"\n",(0,s.jsx)(n.li,{children:"GIF frame extraction"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"blockchain-integration",children:"Blockchain Integration"}),"\n",(0,s.jsx)(n.h3,{id:"solana-integration",children:"Solana Integration"}),"\n",(0,s.jsx)(n.p,{children:"The Solana plugin provides comprehensive blockchain functionality:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { solanaPlugin } from "@okcashpro/okai/plugin-solana";\r\n\r\n// Initialize plugin\r\nruntime.registerPlugin(solanaPlugin);\n'})}),"\n",(0,s.jsx)(n.h4,{id:"token-operations",children:"Token Operations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'// Buy tokens\r\nconst swapResult = await swapToken(\r\n  connection,\r\n  walletPublicKey,\r\n  inputTokenCA,\r\n  outputTokenCA,\r\n  amount,\r\n);\r\n\r\n// Sell tokens\r\nconst sellResult = await sellToken({\r\n  sdk,\r\n  seller: walletKeypair,\r\n  mint: tokenMint,\r\n  amount: sellAmount,\r\n  priorityFee,\r\n  allowOffCurve: false,\r\n  slippage: "1",\r\n  connection,\r\n});\n'})}),"\n",(0,s.jsx)(n.h4,{id:"trust-score-system",children:"Trust Score System"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const trustScoreManager = new TrustScoreManager(tokenProvider, trustScoreDb);\r\n\r\n// Generate trust scores\r\nconst score = await trustScoreManager.generateTrustScore(\r\n  tokenAddress,\r\n  recommenderId,\r\n  recommenderWallet,\r\n);\r\n\r\n// Monitor trade performance\r\nawait trustScoreManager.createTradePerformance(runtime, tokenAddress, userId, {\r\n  buy_amount: amount,\r\n  is_simulation: false,\r\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"custom-services",children:"Custom Services"}),"\n",(0,s.jsx)(n.h3,{id:"speech-generation",children:"Speech Generation"}),"\n",(0,s.jsx)(n.p,{children:"Implement text-to-speech capabilities:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'class SpeechService extends Service implements ISpeechService {\r\n  async generate(runtime: IAgentRuntime, text: string): Promise<Readable> {\r\n    if (runtime.getSetting("ELEVENLABS_XI_API_KEY")) {\r\n      return textToSpeech(runtime, text);\r\n    }\r\n\r\n    const { audio } = await synthesize(text, {\r\n      engine: "vits",\r\n      voice: "en_US-hfc_female-medium",\r\n    });\r\n\r\n    return Readable.from(audio);\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"pdf-processing",children:"PDF Processing"}),"\n",(0,s.jsx)(n.p,{children:"Handle PDF document analysis:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'class PdfService extends Service {\r\n  async convertPdfToText(pdfBuffer: Buffer): Promise<string> {\r\n    const pdf = await getDocument({ data: pdfBuffer }).promise;\r\n    const numPages = pdf.numPages;\r\n    const textPages = [];\r\n\r\n    for (let pageNum = 1; pageNum <= numPages; pageNum++) {\r\n      const page = await pdf.getPage(pageNum);\r\n      const textContent = await page.getTextContent();\r\n      const pageText = textContent.items\r\n        .filter(isTextItem)\r\n        .map((item) => item.str)\r\n        .join(" ");\r\n      textPages.push(pageText);\r\n    }\r\n\r\n    return textPages.join("\\n");\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"advanced-memory-management",children:"Advanced Memory Management"}),"\n",(0,s.jsx)(n.h3,{id:"retrievable-memory-system",children:"Retrievable Memory System"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"class MemoryManager {\r\n  async getMemories({\r\n    agentId,\r\n    roomId,\r\n    count,\r\n  }: {\r\n    agentId: string;\r\n    roomId: string;\r\n    count: number;\r\n  }): Promise<Memory[]> {\r\n    // Implement memory retrieval logic\r\n  }\r\n\r\n  async createMemory(\r\n    memory: Memory,\r\n    allowDuplicates: boolean = false,\r\n  ): Promise<void> {\r\n    // Implement memory storage logic\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"trust-score-database",children:"Trust Score Database"}),"\n",(0,s.jsx)(n.p,{children:"Implement advanced scoring systems:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"class TrustScoreDatabase {\r\n  async calculateValidationTrust(tokenAddress: string): number {\r\n    const sql = `\r\n      SELECT rm.trust_score\r\n      FROM token_recommendations tr\r\n      JOIN recommender_metrics rm ON tr.recommender_id = rm.recommender_id\r\n      WHERE tr.token_address = ?;\r\n    `;\r\n\r\n    const rows = this.db.prepare(sql).all(tokenAddress);\r\n    if (rows.length === 0) return 0;\r\n\r\n    const totalTrust = rows.reduce((acc, row) => acc + row.trust_score, 0);\r\n    return totalTrust / rows.length;\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"plugin-development",children:"Plugin Development"}),"\n",(0,s.jsx)(n.h3,{id:"creating-custom-plugins",children:"Creating Custom Plugins"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const customPlugin: Plugin = {\r\n  name: "custom-plugin",\r\n  description: "Custom Plugin for OKai",\r\n  actions: [\r\n    // Custom actions\r\n  ],\r\n  evaluators: [\r\n    // Custom evaluators\r\n  ],\r\n  providers: [\r\n    // Custom providers\r\n  ],\r\n};\n'})}),"\n",(0,s.jsx)(n.h3,{id:"advanced-action-development",children:"Advanced Action Development"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'export const complexAction: Action = {\r\n  name: "COMPLEX_ACTION",\r\n  similes: ["ALTERNATIVE_NAME", "OTHER_NAME"],\r\n  validate: async (runtime: IAgentRuntime, message: Memory) => {\r\n    // Implement validation logic\r\n    return true;\r\n  },\r\n  handler: async (\r\n    runtime: IAgentRuntime,\r\n    message: Memory,\r\n    state: State,\r\n    options: { [key: string]: unknown },\r\n    callback?: HandlerCallback,\r\n  ): Promise<boolean> => {\r\n    // Implement complex handling logic\r\n    return true;\r\n  },\r\n};\n'})}),"\n",(0,s.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"custom-runtime-configuration",children:"Custom Runtime Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const customRuntime = new AgentRuntime({\r\n  databaseAdapter: new PostgresDatabaseAdapter(config),\r\n  modelProvider: new OpenAIProvider(apiKey),\r\n  plugins: [solanaPlugin, customPlugin],\r\n  services: [\r\n    new VideoService(),\r\n    new ImageDescriptionService(),\r\n    new SpeechService(),\r\n  ],\r\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"advanced-model-configuration",children:"Advanced Model Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const modelConfig = {\r\n  modelClass: ModelClass.LARGE,\r\n  temperature: 0.7,\r\n  maxTokens: 2000,\r\n  topP: 0.9,\r\n  frequencyPenalty: 0.5,\r\n  presencePenalty: 0.5,\r\n};\r\n\r\nconst response = await generateText({\r\n  runtime,\r\n  context: prompt,\r\n  ...modelConfig,\r\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"caching-strategy",children:"Caching Strategy"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'class CacheManager {\r\n  private cache: NodeCache;\r\n  private cacheDir: string;\r\n\r\n  constructor() {\r\n    this.cache = new NodeCache({ stdTTL: 300 });\r\n    this.cacheDir = path.join(__dirname, "cache");\r\n    this.ensureCacheDirectoryExists();\r\n  }\r\n\r\n  private async getCachedData<T>(key: string): Promise<T | null> {\r\n    // Implement tiered caching strategy\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"queue-management",children:"Queue Management"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"class QueueManager {\r\n  private queue: string[] = [];\r\n  private processing: boolean = false;\r\n\r\n  async processQueue(): Promise<void> {\r\n    if (this.processing || this.queue.length === 0) {\r\n      return;\r\n    }\r\n\r\n    this.processing = true;\r\n    while (this.queue.length > 0) {\r\n      const item = this.queue.shift();\r\n      await this.processItem(item);\r\n    }\r\n    this.processing = false;\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'try {\r\n  const result = await complexOperation();\r\n  if (!result) {\r\n    throw new Error("Operation failed");\r\n  }\r\n  return result;\r\n} catch (error) {\r\n  console.error("Error in operation:", error);\r\n  await errorReporting.log(error);\r\n  throw new OperationalError("Failed to complete operation", { cause: error });\r\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"resource-management",children:"Resource Management"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"class ResourceManager {\r\n  private resources: Map<string, Resource> = new Map();\r\n\r\n  async acquire(id: string): Promise<Resource> {\r\n    // Implement resource acquisition with timeout\r\n  }\r\n\r\n  async release(id: string): Promise<void> {\r\n    // Implement resource cleanup\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Memory Leaks"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Monitor memory usage"}),"\n",(0,s.jsx)(n.li,{children:"Implement proper cleanup"}),"\n",(0,s.jsx)(n.li,{children:"Use WeakMap for caching"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Performance Bottlenecks"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Profile slow operations"}),"\n",(0,s.jsx)(n.li,{children:"Implement batching"}),"\n",(0,s.jsx)(n.li,{children:"Use connection pooling"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Integration Issues"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Verify API credentials"}),"\n",(0,s.jsx)(n.li,{children:"Check network connectivity"}),"\n",(0,s.jsx)(n.li,{children:"Validate request formatting"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"debugging",children:"Debugging"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const debug = require("debug")("okai:advanced");\r\n\r\ndebug("Detailed operation info: %O", {\r\n  operation: "complexOperation",\r\n  parameters: params,\r\n  result: result,\r\n});\n'})}),"\n",(0,s.jsx)(n.h2,{id:"further-resources",children:"Further Resources"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/okai/docs/advanced/infrastructure",children:"Infrastructure Guide"})," for deployment"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/okai/docs/advanced/trust-engine",children:"Trust Engine Documentation"})," for scoring system"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/okai/docs/advanced/autonomous-trading",children:"Autonomous Trading Guide"})," for trading features"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/okai/docs/advanced/fine-tuning",children:"Fine-tuning Guide"})," for model optimization"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/okai/docs/advanced/okai-in-tee",children:"OKai in TEE"})," for TEE integration"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var i=r(96540);const s={},t=i.createContext(s);function a(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);