"use strict";(self.webpackChunkokai_docs=self.webpackChunkokai_docs||[]).push([[22965],{65182:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"core/actions","title":"\u26a1 Actions","description":"Actions are core building blocks in OKai that define how agents respond to and interact with messages. They allow agents to interact with external systems, modify their behavior, and perform tasks beyond simple message responses.","source":"@site/docs/core/actions.md","sourceDirName":"core","slug":"/core/actions","permalink":"/okai/docs/core/actions","draft":false,"unlisted":false,"editUrl":"https://github.com/okcashpro/okai/tree/main/docs/docs/core/actions.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Providers","permalink":"/okai/docs/core/providers"},"next":{"title":"Evaluators","permalink":"/okai/docs/core/evaluators"}}');var s=r(74848),t=r(28453);const a={sidebar_position:6},c="\u26a1 Actions",o={},l=[{value:"Overview",id:"overview",level:2},{value:"Implementation",id:"implementation",level:2},{value:"Conversation Flow",id:"conversation-flow",level:2},{value:"CONTINUE",id:"continue",level:3},{value:"IGNORE",id:"ignore",level:3},{value:"NONE",id:"none",level:3},{value:"External Integrations",id:"external-integrations",level:2},{value:"TAKE_ORDER",id:"take_order",level:3},{value:"Creating Custom Actions",id:"creating-custom-actions",level:2},{value:"Testing Actions",id:"testing-actions",level:3},{value:"Core Concepts",id:"core-concepts",level:2},{value:"Action Structure",id:"action-structure",level:3},{value:"Key Components",id:"key-components",level:3},{value:"Built-in Actions",id:"built-in-actions-1",level:2},{value:"CONTINUE",id:"continue-1",level:3},{value:"IGNORE",id:"ignore-1",level:3},{value:"FOLLOW_ROOM",id:"follow_room",level:3},{value:"Creating Custom Actions",id:"creating-custom-actions-1",level:2},{value:"Basic Action Template",id:"basic-action-template",level:3},{value:"Advanced Action Example",id:"advanced-action-example",level:3},{value:"Implementation Patterns",id:"implementation-patterns",level:2},{value:"State-Based Actions",id:"state-based-actions",level:3},{value:"Service Integration",id:"service-integration",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Action Design",id:"action-design",level:3},{value:"Example Organization",id:"example-organization",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Advanced Features",id:"advanced-features",level:2},{value:"Action Composition",id:"action-composition",level:3},{value:"Action Chains",id:"action-chains",level:3},{value:"Example: Complete Action Implementation",id:"example-complete-action-implementation",level:2},{value:"Further Reading",id:"further-reading",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"-actions",children:"\u26a1 Actions"})}),"\n",(0,s.jsx)(n.p,{children:"Actions are core building blocks in OKai that define how agents respond to and interact with messages. They allow agents to interact with external systems, modify their behavior, and perform tasks beyond simple message responses."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Each Action consists of:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"}),": Unique identifier for the action"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"similes"}),": Array of alternative names/variations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"description"}),": Detailed explanation of the action's purpose"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"validate"}),": Function that checks if action is appropriate"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"handler"}),": Implementation of the action's behavior"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"examples"}),": Array of example usage patterns"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"implementation",children:"Implementation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface Action {\r\n  name: string;\r\n  similes: string[];\r\n  description: string;\r\n  examples: ActionExample[][];\r\n  handler: Handler;\r\n  validate: Validator;\r\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Source: ",(0,s.jsx)(n.a,{href:"https://github.com/okcashpro/okai/packages/core/src/types.ts",children:"https://github.com/okcashpro/okai/packages/core/src/types.ts"})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h1,{id:"built-in-actions",children:"Built-in Actions"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"conversation-flow",children:"Conversation Flow"}),"\n",(0,s.jsx)(n.h3,{id:"continue",children:"CONTINUE"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Maintains conversation when more context is needed"}),"\n",(0,s.jsx)(n.li,{children:"Manages natural dialogue progression"}),"\n",(0,s.jsx)(n.li,{children:"Limited to 3 consecutive continues"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"ignore",children:"IGNORE"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Gracefully disengages from conversations"}),"\n",(0,s.jsxs)(n.li,{children:["Handles:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Inappropriate interactions"}),"\n",(0,s.jsx)(n.li,{children:"Natural conversation endings"}),"\n",(0,s.jsx)(n.li,{children:"Post-closing responses"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"none",children:"NONE"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Default response action"}),"\n",(0,s.jsx)(n.li,{children:"Used for standard conversational replies"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"external-integrations",children:"External Integrations"}),"\n",(0,s.jsx)(n.h3,{id:"take_order",children:"TAKE_ORDER"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Records trading/purchase orders"}),"\n",(0,s.jsx)(n.li,{children:"Processes user conviction levels"}),"\n",(0,s.jsx)(n.li,{children:"Validates ticker symbols and contract addresses"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const take_order: Action = {\r\n  name: "TAKE_ORDER",\r\n  similes: ["BUY_ORDER", "PLACE_ORDER"],\r\n  description: "Records a buy order based on the user\'s conviction level.",\r\n  validate: async (runtime: IAgentRuntime, message: Memory) => {\r\n    const text = (message.content as Content).text;\r\n    const tickerRegex = /\\b[A-Z]{1,5}\\b/g;\r\n    return tickerRegex.test(text);\r\n  },\r\n  // ... rest of implementation\r\n};\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Source: ",(0,s.jsx)(n.a,{href:"https://github.com/okcashpro/okai/packages/plugin-solana/src/actions/takeOrder.ts",children:"https://github.com/okcashpro/okai/packages/plugin-solana/src/actions/takeOrder.ts"})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"creating-custom-actions",children:"Creating Custom Actions"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Implement the Action interface"}),"\n",(0,s.jsx)(n.li,{children:"Define validation logic"}),"\n",(0,s.jsx)(n.li,{children:"Implement handler functionality"}),"\n",(0,s.jsx)(n.li,{children:"Provide usage examples"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const customAction: Action = {\r\n  name: "CUSTOM_ACTION",\r\n  similes: ["SIMILAR_ACTION"],\r\n  description: "Action purpose",\r\n  validate: async (runtime: IAgentRuntime, message: Memory) => {\r\n    // Validation logic\r\n    return true;\r\n  },\r\n  handler: async (runtime: IAgentRuntime, message: Memory) => {\r\n    // Implementation\r\n  },\r\n  examples: [],\r\n};\n'})}),"\n",(0,s.jsx)(n.h3,{id:"testing-actions",children:"Testing Actions"}),"\n",(0,s.jsx)(n.p,{children:"Use the built-in testing framework:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'test("Validate action behavior", async () => {\r\n  const message: Memory = {\r\n    userId: user.id,\r\n    content: { text: "Test message" },\r\n    roomId,\r\n  };\r\n\r\n  const response = await handleMessage(runtime, message);\r\n  // Verify response\r\n});\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,s.jsx)(n.h3,{id:"action-structure",children:"Action Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface Action {\r\n  name: string;\r\n  similes: string[];\r\n  description: string;\r\n  validate: (runtime: IAgentRuntime, message: Memory) => Promise<boolean>;\r\n  handler: (\r\n    runtime: IAgentRuntime,\r\n    message: Memory,\r\n    state?: State,\r\n  ) => Promise<void>;\r\n  examples: ActionExample[][];\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"key-components",children:"Key Components"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"name"}),": Unique identifier for the action"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"similes"}),": Alternative names/triggers for the action"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"description"}),": Explains when and how the action should be used"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"validate"}),": Determines if the action can be executed"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"handler"}),": Implements the action's behavior"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"examples"}),": Demonstrates proper usage patterns"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"built-in-actions-1",children:"Built-in Actions"}),"\n",(0,s.jsx)(n.h3,{id:"continue-1",children:"CONTINUE"}),"\n",(0,s.jsx)(n.p,{children:"Continues the conversation when appropriate:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const continueAction: Action = {\r\n  name: "CONTINUE",\r\n  similes: ["ELABORATE", "KEEP_TALKING"],\r\n  description:\r\n    "Used when the message requires a follow-up. Don\'t use when conversation is finished.",\r\n  validate: async (runtime, message) => {\r\n    // Validation logic\r\n    return true;\r\n  },\r\n  handler: async (runtime, message, state) => {\r\n    // Continuation logic\r\n  },\r\n};\n'})}),"\n",(0,s.jsx)(n.h3,{id:"ignore-1",children:"IGNORE"}),"\n",(0,s.jsx)(n.p,{children:"Stops responding to irrelevant or completed conversations:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const ignoreAction: Action = {\r\n  name: "IGNORE",\r\n  similes: ["STOP_TALKING", "STOP_CHATTING"],\r\n  description:\r\n    "Used when ignoring the user is appropriate (conversation ended, user is aggressive, etc.)",\r\n  handler: async (runtime, message) => {\r\n    return true;\r\n  },\r\n};\n'})}),"\n",(0,s.jsx)(n.h3,{id:"follow_room",children:"FOLLOW_ROOM"}),"\n",(0,s.jsx)(n.p,{children:"Actively participates in a conversation:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const followRoomAction: Action = {\r\n  name: "FOLLOW_ROOM",\r\n  similes: ["FOLLOW_CHAT", "FOLLOW_CONVERSATION"],\r\n  description:\r\n    "Start following channel with interest, responding without explicit mentions.",\r\n  handler: async (runtime, message) => {\r\n    // Room following logic\r\n  },\r\n};\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"creating-custom-actions-1",children:"Creating Custom Actions"}),"\n",(0,s.jsx)(n.h3,{id:"basic-action-template",children:"Basic Action Template"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const customAction: Action = {\r\n  name: "CUSTOM_ACTION",\r\n  similes: ["ALTERNATE_NAME", "OTHER_TRIGGER"],\r\n  description: "Detailed description of when and how to use this action",\r\n  validate: async (runtime: IAgentRuntime, message: Memory) => {\r\n    // Validation logic\r\n    return true;\r\n  },\r\n  handler: async (runtime: IAgentRuntime, message: Memory) => {\r\n    // Implementation logic\r\n    return true;\r\n  },\r\n  examples: [\r\n    [\r\n      {\r\n        user: "{{user1}}",\r\n        content: { text: "Trigger message" },\r\n      },\r\n      {\r\n        user: "{{user2}}",\r\n        content: { text: "Response", action: "CUSTOM_ACTION" },\r\n      },\r\n    ],\r\n  ],\r\n};\n'})}),"\n",(0,s.jsx)(n.h3,{id:"advanced-action-example",children:"Advanced Action Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const complexAction: Action = {\r\n  name: "PROCESS_DOCUMENT",\r\n  similes: ["READ_DOCUMENT", "ANALYZE_DOCUMENT"],\r\n  description: "Process and analyze uploaded documents",\r\n  validate: async (runtime, message) => {\r\n    const hasAttachment = message.content.attachments?.length > 0;\r\n    const supportedTypes = ["pdf", "txt", "doc"];\r\n    return (\r\n      hasAttachment &&\r\n      supportedTypes.includes(message.content.attachments[0].type)\r\n    );\r\n  },\r\n  handler: async (runtime, message, state) => {\r\n    const attachment = message.content.attachments[0];\r\n\r\n    // Process document\r\n    const content = await runtime\r\n      .getService<IDocumentService>(ServiceType.DOCUMENT)\r\n      .processDocument(attachment);\r\n\r\n    // Store in memory\r\n    await runtime.documentsManager.createMemory({\r\n      id: generateId(),\r\n      content: { text: content },\r\n      userId: message.userId,\r\n      roomId: message.roomId,\r\n    });\r\n\r\n    return true;\r\n  },\r\n};\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"implementation-patterns",children:"Implementation Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"state-based-actions",children:"State-Based Actions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const stateAction: Action = {\r\n  name: "UPDATE_STATE",\r\n  handler: async (runtime, message, state) => {\r\n    const newState = await runtime.composeState(message, {\r\n      additionalData: "new-data",\r\n    });\r\n\r\n    await runtime.updateState(newState);\r\n    return true;\r\n  },\r\n};\n'})}),"\n",(0,s.jsx)(n.h3,{id:"service-integration",children:"Service Integration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const serviceAction: Action = {\r\n  name: "TRANSCRIBE_AUDIO",\r\n  handler: async (runtime, message) => {\r\n    const transcriptionService = runtime.getService<ITranscriptionService>(\r\n      ServiceType.TRANSCRIPTION,\r\n    );\r\n\r\n    const result = await transcriptionService.transcribe(\r\n      message.content.attachments[0],\r\n    );\r\n\r\n    return true;\r\n  },\r\n};\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"action-design",children:"Action Design"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Clear Purpose"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Single responsibility principle"}),"\n",(0,s.jsx)(n.li,{children:"Well-defined triggers"}),"\n",(0,s.jsx)(n.li,{children:"Clear success criteria"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Robust Validation"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Check prerequisites"}),"\n",(0,s.jsx)(n.li,{children:"Validate input data"}),"\n",(0,s.jsx)(n.li,{children:"Handle edge cases"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Error Handling"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Graceful failure"}),"\n",(0,s.jsx)(n.li,{children:"Meaningful error messages"}),"\n",(0,s.jsx)(n.li,{children:"State recovery"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"example-organization",children:"Example Organization"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Comprehensive Coverage"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"examples: [\r\n  // Happy path\r\n  [basicUsageExample],\r\n  // Edge cases\r\n  [edgeCaseExample],\r\n  // Error cases\r\n  [errorCaseExample],\r\n];\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Clear Context"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'examples: [\r\n  [\r\n    {\r\n      user: "{{user1}}",\r\n      content: {\r\n        text: "Context message showing why action is needed",\r\n      },\r\n    },\r\n    {\r\n      user: "{{user2}}",\r\n      content: {\r\n        text: "Clear response demonstrating action usage",\r\n        action: "ACTION_NAME",\r\n      },\r\n    },\r\n  ],\r\n];\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Action Not Triggering"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Check validation logic"}),"\n",(0,s.jsx)(n.li,{children:"Verify similes list"}),"\n",(0,s.jsx)(n.li,{children:"Review example patterns"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Handler Failures"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Validate service availability"}),"\n",(0,s.jsx)(n.li,{children:"Check state requirements"}),"\n",(0,s.jsx)(n.li,{children:"Review error logs"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"State Inconsistencies"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Verify state updates"}),"\n",(0,s.jsx)(n.li,{children:"Check concurrent modifications"}),"\n",(0,s.jsx)(n.li,{children:"Review state transitions"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"advanced-features",children:"Advanced Features"}),"\n",(0,s.jsx)(n.h3,{id:"action-composition",children:"Action Composition"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const compositeAction: Action = {\r\n  name: "PROCESS_AND_RESPOND",\r\n  handler: async (runtime, message) => {\r\n    // Process first action\r\n    await runtime.processAction("ANALYZE_CONTENT", message);\r\n\r\n    // Process second action\r\n    await runtime.processAction("GENERATE_RESPONSE", message);\r\n\r\n    return true;\r\n  },\r\n};\n'})}),"\n",(0,s.jsx)(n.h3,{id:"action-chains",children:"Action Chains"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const chainedAction: Action = {\r\n  name: "WORKFLOW",\r\n  handler: async (runtime, message) => {\r\n    const actions = ["VALIDATE", "PROCESS", "RESPOND"];\r\n\r\n    for (const actionName of actions) {\r\n      await runtime.processAction(actionName, message);\r\n    }\r\n\r\n    return true;\r\n  },\r\n};\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"example-complete-action-implementation",children:"Example: Complete Action Implementation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { Action, IAgentRuntime, Memory, State } from "@okcashpro/okai";\r\n\r\nconst documentAnalysisAction: Action = {\r\n  name: "ANALYZE_DOCUMENT",\r\n  similes: ["READ_DOCUMENT", "PROCESS_DOCUMENT", "REVIEW_DOCUMENT"],\r\n  description: "Analyzes uploaded documents and provides insights",\r\n\r\n  validate: async (runtime: IAgentRuntime, message: Memory) => {\r\n    // Check for document attachment\r\n    if (!message.content.attachments?.length) {\r\n      return false;\r\n    }\r\n\r\n    // Verify document type\r\n    const attachment = message.content.attachments[0];\r\n    return ["pdf", "txt", "doc"].includes(attachment.type);\r\n  },\r\n\r\n  handler: async (runtime: IAgentRuntime, message: Memory, state?: State) => {\r\n    try {\r\n      // Get document service\r\n      const docService = runtime.getService<IDocumentService>(\r\n        ServiceType.DOCUMENT,\r\n      );\r\n\r\n      // Process document\r\n      const content = await docService.processDocument(\r\n        message.content.attachments[0],\r\n      );\r\n\r\n      // Store analysis\r\n      await runtime.documentsManager.createMemory({\r\n        id: generateId(),\r\n        content: {\r\n          text: content,\r\n          analysis: await docService.analyze(content),\r\n        },\r\n        userId: message.userId,\r\n        roomId: message.roomId,\r\n        createdAt: Date.now(),\r\n      });\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error("Document analysis failed:", error);\r\n      return false;\r\n    }\r\n  },\r\n\r\n  examples: [\r\n    [\r\n      {\r\n        user: "{{user1}}",\r\n        content: {\r\n          text: "Can you analyze this document?",\r\n          attachments: [{ type: "pdf", url: "document.pdf" }],\r\n        },\r\n      },\r\n      {\r\n        user: "{{user2}}",\r\n        content: {\r\n          text: "I\'ll analyze that document for you",\r\n          action: "ANALYZE_DOCUMENT",\r\n        },\r\n      },\r\n    ],\r\n  ],\r\n};\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h1,{id:"best-practices-1",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Validation"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Thoroughly check input parameters"}),"\n",(0,s.jsx)(n.li,{children:"Verify runtime conditions"}),"\n",(0,s.jsx)(n.li,{children:"Handle edge cases"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Error Handling"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Implement comprehensive error catching"}),"\n",(0,s.jsx)(n.li,{children:"Provide clear error messages"}),"\n",(0,s.jsx)(n.li,{children:"Clean up resources properly"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Documentation"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Include clear usage examples"}),"\n",(0,s.jsx)(n.li,{children:"Document expected inputs/outputs"}),"\n",(0,s.jsx)(n.li,{children:"Explain error scenarios"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/okai/docs/core/providers",children:"Provider System"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#",children:"Service Integration"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"../../packages/core",children:"Memory Management"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>c});var i=r(96540);const s={},t=i.createContext(s);function a(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);